{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/stats-js/build/stats.min.js","webpack:///./src/plugin/v_shader.glsl","webpack:///./src/plugin/f_shader.glsl","webpack:///./src/plugin/map_v_shader.glsl","webpack:///./src/plugin/map_f_shader.glsl","webpack:///./src/js/helper.js","webpack:///./src/js/lib/webgl-utils.js","webpack:///./src/js/lib/cuon-utils.js","webpack:///./src/js/gl_renderer.js","webpack:///./src/js/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Date","now","g","Infinity","h","q","f","document","createElement","id","addEventListener","b","preventDefault","style","cssText","a","appendChild","innerHTML","children","length","j","k","e","display","REVISION","domElement","setMode","begin","end","Math","min","max","textContent","firstChild","height","round","update","this","resize","el","width","window","innerWidth","innerHeight","makeFailHTML","msg","GET_A_WEBGL_BROWSER","OTHER_PROBLEM","setupWebGL","canvas","opt_attribs","opt_onError","container","getElementsByTagName","str","WebGLRenderingContext","event","statusMessage","context","create3DContext","names","ii","getContext","createProgram","gl","vshader","fshader","vertexShader","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","error","getProgramInfoLog","console","log","deleteProgram","deleteShader","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","cancelAnimationFrame","cancelRequestAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelAnimationFrame","mozCancelRequestAnimationFrame","msCancelAnimationFrame","msCancelRequestAnimationFrame","oCancelAnimationFrame","oCancelRequestAnimationFrame","clearTimeout","MAPSIZE","stats","Stats","position","left","top","body","getElementById","glRenderer","timeInfo","time","constructor","mapVShader","mapFShader","timestamp","getTime","canvasOpt","opt_debug","WebGLUtils","arguments","WebGLDebugUtils","makeDebugContext","getWebGLContext","preserveDrawingBuffer","getExtension","attributeLocation","uniformLocation","mapProgram","clearColor","fbo","initFramebufferObject","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texture","setAttribute","Float32Array","setUniform2v","data","location","getUniformLocation","dataArray","useProgram","uniform2fv","setUniform1i","uniform1i","setUniform1f","uniform1f","num","typeName","getAttribLocation","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","enableVertexAttribArray","framebuffer","depthBuffer","OFFSCREEN_WIDTH","OFFSCREEN_HEIGHT","deleteFramebuffer","deleteTexture","deleteRenderbuffer","createFramebuffer","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MIN_FILTER","LINEAR","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","framebufferRenderbuffer","DEPTH_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","toString","drawMap","viewport","clear","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","drawScene","vShader","fShader","animate"],"mappings":"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","file":"js/main.bundle.184bda463c696c288a58.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","// stats.js - http://github.com/mrdoob/stats.js\nvar Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement(\"div\");f.id=\"stats\";f.addEventListener(\"mousedown\",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText=\"width:80px;opacity:0.9;cursor:pointer\";var a=document.createElement(\"div\");a.id=\"fps\";a.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#002\";f.appendChild(a);var i=document.createElement(\"div\");i.id=\"fpsText\";i.style.cssText=\"color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";\ni.innerHTML=\"FPS\";a.appendChild(i);var c=document.createElement(\"div\");c.id=\"fpsGraph\";c.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0ff\";for(a.appendChild(c);74>c.children.length;){var j=document.createElement(\"span\");j.style.cssText=\"width:1px;height:30px;float:left;background-color:#113\";c.appendChild(j)}var d=document.createElement(\"div\");d.id=\"ms\";d.style.cssText=\"padding:0 0 3px 3px;text-align:left;background-color:#020;display:none\";f.appendChild(d);var k=document.createElement(\"div\");\nk.id=\"msText\";k.style.cssText=\"color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px\";k.innerHTML=\"MS\";d.appendChild(k);var e=document.createElement(\"div\");e.id=\"msGraph\";e.style.cssText=\"position:relative;width:74px;height:30px;background-color:#0f0\";for(d.appendChild(e);74>e.children.length;)j=document.createElement(\"span\"),j.style.cssText=\"width:1px;height:30px;float:left;background-color:#131\",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=\n\"block\";d.style.display=\"none\";break;case 1:a.style.display=\"none\",d.style.display=\"block\"}};return{REVISION:12,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+\" MS (\"+n+\"-\"+o+\")\";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+\"px\";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+\" FPS (\"+p+\"-\"+q+\")\",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=\na+\"px\",m=b,r=0);return b},update:function(){l=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\n","module.exports = \"attribute vec2 a_Position;\\nvarying vec2 v_texCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 0.0, 1.0);\\n  v_texCoord = a_Position / 2.0 + 0.5;\\n}\"","module.exports = \"#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\n#define PI 3.1415926\\n#define TWO_PI 6.2831852\\n#define PIECE 12.0\\n#define sqart3 1.732050807568877\\n\\nuniform vec2 u_resolution;\\nuniform sampler2D u_map;\\nuniform float u_time;\\nvarying vec2 v_texCoord;\\n\\nvec2 hexagon(vec2 center, vec2 st){\\n  vec2 toCenter = center - st;\\n  // toCenter.x *= u_resolution.x / u_resolution.y;\\n  float theta = atan(toCenter.y, toCenter.x);\\n  theta = theta / TWO_PI + 0.5;\\n  theta *= PIECE;\\n  float index = floor(theta);\\n  theta = fract(theta);\\n  if(mod(index, 2.0) > 0.0){\\n    theta = 1.0 - theta;\\n  }\\n  theta *= TWO_PI / PIECE;\\n  float d = length(toCenter);\\n  return vec2(cos(theta) * d, sin(theta) * d);\\n}\\n\\nvoid main(){\\n  vec2 st = gl_FragCoord.xy / u_resolution;\\n  st.x *= u_resolution.x / u_resolution.y;\\n  st.y *= 2.0 * sqart3;\\n  st.x *= 3.0;\\n  // st.x *= 3.0;\\n\\n\\n  vec2 i_st = floor(st);\\n  vec2 f_st = fract(st);\\n  if(mod(i_st.y, 2.0) > 0.0){\\n    f_st.x += 0.5;\\n  }\\n  f_st = fract(st);\\n\\n  vec3 color = vec3(0.0);\\n  color += step(0.98, f_st.x);\\n  color += step(0.98, f_st.y);\\n  vec2 center = vec2(0.0);\\n\\n  float min_dist = 1.0;\\n\\n  for(int i = 0; i < 7; i++){\\n    vec2 i_diff = vec2(0.0);\\n    if(i == 0){\\n      i_diff = vec2(-1.0, -1.0);\\n    }\\n    if(i == 1){\\n      i_diff = vec2(0.0, -1.0);\\n    }\\n    if(i == 2){\\n      i_diff = vec2(-1.0, 0.0);\\n    }\\n    if(i == 3){\\n      i_diff = vec2(0.0, 0.0);\\n    }\\n    if(i == 4){\\n      i_diff = vec2(1.0, 0.0);\\n    }\\n    if(i == 5){\\n      i_diff = vec2(-1.0, 1.0);\\n    }\\n    if(i == 6){\\n      i_diff = vec2(0.0, 1.0);\\n    }\\n    vec2 neighbor = i_st + i_diff;\\n    if(mod(neighbor.y, 2.0) > 0.0){\\n      neighbor.x += 0.5;\\n    }\\n    vec2 point = neighbor + 0.5;\\n    vec2 diff = point - st;\\n    diff.y /= 1.15;\\n    float dist = length(diff);\\n    if(dist < min_dist){\\n      min_dist = dist;\\n      center = point;\\n    }\\n  }\\n\\n  vec2 hex_st = hexagon(center, st);\\n  hex_st = fract(hex_st);\\n\\n  // color += min_dist;\\n  color += 1.0 - step(0.2, min_dist);\\n  gl_FragColor = vec4(color, 1.0);\\n  // gl_FragColor = vec4(hex_st, 0.0, 1.0);\\n  // gl_FragColor = texture2D(u_map, hex_st);\\n  // gl_FragColor = texture2D(u_map, v_texCoord);\\n}\"","module.exports = \"attribute vec2 a_Position;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 0.0, 1.0);\\n}\"","module.exports = \"#extension GL_EXT_shader_texture_lod : enable\\n#extension GL_OES_standard_derivatives : enable\\n\\n#ifdef GL_ES\\nprecision mediump float;\\n#endif\\n\\n#define PI 3.1415926\\n#define TWO_PI 6.2831852\\n\\nuniform vec2 u_resolution;\\nuniform float u_time;\\n\\nvec2 random2( vec2 p ) {\\n  return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\\n}\\n\\nfloat n11(float seed){\\n  return fract(sin(seed * 1234.0) * 4567.0);\\n}\\n\\nfloat n21(vec2 st){\\n  return n11(st.x) * n11(st.y);\\n}\\n\\nvec3 hsb2rgb( in vec3 c ){\\n  vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\\n                            6.0)-3.0)-1.0,\\n                    0.0,\\n                    1.0 );\\n  rgb = rgb*rgb*(3.0-2.0*rgb);\\n  return c.z * mix(vec3(1.0), rgb, c.y);\\n}\\n\\nvoid main(){\\n  vec2 st = gl_FragCoord.xy / u_resolution;\\n  st.x *= 3.0;\\n  st.y *= 3.0;\\n\\n  vec3 color = vec3(0.0, 0.0, 0.0);\\n\\n  vec2 i_st = floor(st);\\n  vec2 f_st = fract(st);\\n\\n\\n  float min_dist = 2.0;\\n\\n  for(int y = -1; y <= 1; y++){\\n    for(int x = -1; x <= 1; x++){\\n      vec2 neighbor = vec2(float(x), float(y));\\n      vec2 seed = i_st + neighbor;\\n      vec2 point = random2(seed);\\n      point = 0.5 + 0.5 * sin(u_time / 5.0 + TWO_PI * point);\\n      vec2 diff = neighbor + point - f_st;\\n      float dist = length(diff);\\n      if(dist < min_dist){\\n        min_dist = dist;\\n      }\\n    }\\n  }\\n\\n  vec3 l_color = hsb2rgb(vec3(sin(u_time / 200.0), 0.5, 1.0));\\n  // color = mix(vec3(1.0), color, sec_min_dist - min_dist);\\n\\n  color += min_dist * min_dist * l_color;\\n  // color += 1.0 - step(0.02, min_dist);\\n\\n  gl_FragColor = vec4(color, 1.0);\\n\\n  // st = gl_FragCoord.xy / u_resolution;\\n  // gl_FragColor = vec4(st, 0.0, 1.0);\\n}\"","function resize(el) {\n  el.width = window.innerWidth;\n  el.height = window.innerHeight;\n}\n\nfunction getResizeEl(el){\n  window.addEventListener('resize', function(){\n    resize(el);\n  }, false);\n  resize(el);\n  return el;\n}\n\nfunction getResponseDist(val) {\n  return (val / 375) * window.innerWidth;\n}\n\nfunction px2coord(x, y, width, height) {\n  return {\n    u: x * 2 / width - 1,\n    v: 1 - 2 * y / height\n  }\n}\n\nexport {\n  getResizeEl,\n  getResponseDist,\n  px2coord\n};","/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimationFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\n\r\n/**\r\n * Creates the HTLM for a failure message\r\n * @param {string} canvasContainerId id of container of th\r\n *        canvas.\r\n * @return {string} The html.\r\n */\r\nvar makeFailHTML = function(msg) {\r\n  return '' +\r\n        '<div style=\"margin: auto; width:500px;z-index:10000;margin-top:20em;text-align:center;\">' + msg + '</div>';\r\n  return '' +\r\n    '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n    '<td align=\"center\">' +\r\n    '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n    '<div style=\"\">' + msg + '</div>' +\r\n    '</div>' +\r\n    '</td></tr></table>';\r\n};\r\n\r\n/**\r\n * Mesasge for getting a webgl browser\r\n * @type {string}\r\n */\r\nvar GET_A_WEBGL_BROWSER = '' +\r\n  'This page requires a browser that supports WebGL.<br/>' +\r\n  '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n\r\n/**\r\n * Mesasge for need better hardware\r\n * @type {string}\r\n */\r\nvar OTHER_PROBLEM = '' +\r\n  \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n  '<a href=\"http://get.webgl.org\">Click here for more information.</a>';\r\n\r\n/**\r\n * Creates a webgl context. If creation fails it will\r\n * change the contents of the container of the <canvas>\r\n * tag to an error message with the correct links for WebGL.\r\n * @param {Element} canvas. The canvas element to create a\r\n *     context from.\r\n * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n *     creation attributes you want to pass in.\r\n * @param {function:(msg)} opt_onError An function to call\r\n *     if there is an error during creation.\r\n * @return {WebGLRenderingContext} The created context.\r\n */\r\nvar setupWebGL = function(canvas, opt_attribs, opt_onError) {\r\n  function handleCreationError(msg) {\r\n      var container = document.getElementsByTagName(\"body\")[0];\r\n    //var container = canvas.parentNode;\r\n    if (container) {\r\n      var str = window.WebGLRenderingContext ?\r\n           OTHER_PROBLEM :\r\n           GET_A_WEBGL_BROWSER;\r\n      if (msg) {\r\n        str += \"<br/><br/>Status: \" + msg;\r\n      }\r\n      container.innerHTML = makeFailHTML(str);\r\n    }\r\n  };\r\n\r\n  opt_onError = opt_onError || handleCreationError;\r\n\r\n  if (canvas.addEventListener) {\r\n    canvas.addEventListener(\"webglcontextcreationerror\", function(event) {\r\n          opt_onError(event.statusMessage);\r\n        }, false);\r\n  }\r\n  var context = create3DContext(canvas, opt_attribs);\r\n  if (!context) {\r\n    if (!window.WebGLRenderingContext) {\r\n      opt_onError(\"\");\r\n    } else {\r\n      opt_onError(\"\");\r\n    }\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n/**\r\n * Creates a webgl context.\r\n * @param {!Canvas} canvas The canvas tag to get context\r\n *     from. If one is not passed in one will be created.\r\n * @return {!WebGLContext} The created context.\r\n */\r\nvar create3DContext = function(canvas, opt_attribs) {\r\n  var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n  var context = null;\r\n  for (var ii = 0; ii < names.length; ++ii) {\r\n    try {\r\n      context = canvas.getContext(names[ii], opt_attribs);\r\n    } catch(e) {}\r\n    if (context) {\r\n      break;\r\n    }\r\n  }\r\n  return context;\r\n}\r\n\r\n/**\r\n * Provides requestAnimationFrame in a cross browser\r\n * way.\r\n */\r\nif (!window.requestAnimationFrame) {\r\n  window.requestAnimationFrame = (function() {\r\n    return window.requestAnimationFrame ||\r\n           window.webkitRequestAnimationFrame ||\r\n           window.mozRequestAnimationFrame ||\r\n           window.oRequestAnimationFrame ||\r\n           window.msRequestAnimationFrame ||\r\n           function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\r\n             window.setTimeout(callback, 1000/60);\r\n           };\r\n  })();\r\n}\r\n\r\n/** * ERRATA: 'cancelRequestAnimationFrame' renamed to 'cancelAnimationFrame' to reflect an update to the W3C Animation-Timing Spec. \r\n * \r\n * Cancels an animation frame request. \r\n * Checks for cross-browser support, falls back to clearTimeout. \r\n * @param {number}  Animation frame request. */\r\nif (!window.cancelAnimationFrame) {\r\n  window.cancelAnimationFrame = (window.cancelRequestAnimationFrame ||\r\n                                 window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame ||\r\n                                 window.mozCancelAnimationFrame || window.mozCancelRequestAnimationFrame ||\r\n                                 window.msCancelAnimationFrame || window.msCancelRequestAnimationFrame ||\r\n                                 window.oCancelAnimationFrame || window.oCancelRequestAnimationFrame ||\r\n                                 window.clearTimeout);\r\n}\r\n\r\nexport {\r\n  create3DContext,\r\n  setupWebGL\r\n};","import * as WebGLUtils from './webgl-utils.js';\r\n\r\n// cuon-utils.js (c) 2012 kanda and matsuda\r\n/**\r\n * Create a program object and make current\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return true, if the program object was created and successfully made current \r\n */\r\nfunction initShaders(gl, vshader, fshader) {\r\n  var program = createProgram(gl, vshader, fshader);\r\n  if (!program) {\r\n    console.log('Failed to create program');\r\n    return false;\r\n  }\r\n\r\n  gl.useProgram(program);\r\n  gl.program = program;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Create the linked program object\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return created program object, or null if the creation has failed\r\n */\r\nfunction createProgram(gl, vshader, fshader) {\r\n  // Create shader object\r\n  var vertexShader = loadShader(gl, gl.VERTEX_SHADER, vshader);\r\n  var fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fshader);\r\n  if (!vertexShader || !fragmentShader) {\r\n    return null;\r\n  }\r\n\r\n  // Create a program object\r\n  var program = gl.createProgram();\r\n  if (!program) {\r\n    return null;\r\n  }\r\n\r\n  // Attach the shader objects\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n\r\n  // Link the program object\r\n  gl.linkProgram(program);\r\n\r\n  // Check the result of linking\r\n  var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (!linked) {\r\n    var error = gl.getProgramInfoLog(program);\r\n    console.log('Failed to link program: ' + error);\r\n    gl.deleteProgram(program);\r\n    gl.deleteShader(fragmentShader);\r\n    gl.deleteShader(vertexShader);\r\n    return null;\r\n  }\r\n  return program;\r\n}\r\n\r\n/**\r\n * Create a shader object\r\n * @param gl GL context\r\n * @param type the type of the shader object to be created\r\n * @param source shader program (string)\r\n * @return created shader object, or null if the creation has failed.\r\n */\r\nfunction loadShader(gl, type, source) {\r\n  // Create shader object\r\n  var shader = gl.createShader(type);\r\n  if (shader == null) {\r\n    console.log('unable to create shader');\r\n    return null;\r\n  }\r\n\r\n  // Set the shader program\r\n  gl.shaderSource(shader, source);\r\n\r\n  // Compile the shader\r\n  gl.compileShader(shader);\r\n\r\n  // Check the result of compilation\r\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n  if (!compiled) {\r\n    var error = gl.getShaderInfoLog(shader);\r\n    console.log('Failed to compile shader: ' + error);\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\n/** \r\n * Initialize and get the rendering for WebGL\r\n * @param canvas <cavnas> element\r\n * @param opt_debug flag to initialize the context for debugging\r\n * @return the rendering context for WebGL\r\n */\r\nfunction getWebGLContext(canvas, canvasOpt, opt_debug) {\r\n  // Get the rendering context for WebGL\r\n  var gl = WebGLUtils.setupWebGL(canvas, canvasOpt);\r\n  if (!gl) return null;\r\n\r\n  // if opt_debug is explicitly false, create the context for debugging\r\n  if (arguments.length < 3 || opt_debug) {\r\n    gl = WebGLDebugUtils.makeDebugContext(gl);\r\n  }\r\n\r\n  return gl;\r\n}\r\n\r\nexport {\r\n  initShaders,\r\n  createProgram,\r\n  loadShader,\r\n  getWebGLContext\r\n};","import { getWebGLContext, createProgram } from './lib/cuon-utils';\n\nconst MAPSIZE = 1024;\n\nclass GLRenderer {\n  constructor(canvas, vshader, fshader, mapVShader, mapFShader) {\n    this.timestamp = (new Date()).getTime();\n    this.canvas = canvas;\n    this.gl = getWebGLContext(canvas, {\n      preserveDrawingBuffer: false\n    }, false);\n    if (!this.gl) {\n      console.log(\"Failed to get the rendering context for WebGL\");\n      return;\n    }\n    this.gl.getExtension('OES_standard_derivatives');\n    this.gl.getExtension('EXT_shader_texture_lod');\n    this.program = createProgram(this.gl, vshader, fshader);\n    this.program.attributeLocation = {};\n    this.program.uniformLocation = {};\n\n    this.mapProgram = createProgram(this.gl, mapVShader, mapFShader);\n    this.mapProgram.attributeLocation = {};\n    this.mapProgram.uniformLocation = {};\n\n    // this.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE);\n    // this.gl.enable(this.gl.BLEND);\n    this.gl.clearColor(1.0, 1.0, 1.0, 0.0);\n\n\n    this.fbo = this.initFramebufferObject();\n    if (!this.fbo) {\n      console.log(\"Failed to intialize the framebuffer object (FBO)\");\n      return;\n    }\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.fbo.texture);\n\n    this.setAttribute(\n      this.program,\n      \"a_Position\",\n      new Float32Array([\n        -1.0,\n        -1.0,\n\n        1.0,\n        -1.0,\n\n        -1.0,\n        1.0,\n\n        -1.0,\n        1.0,\n\n        1.0,\n        -1.0,\n\n        1.0,\n        1.0\n      ]),\n      2,\n      \"FLOAT\"\n    );\n    this.setUniform2v(this.program, \"u_resolution\", [\n      canvas.width,\n      canvas.height\n    ]);\n  }\n  setUniform2v(program, name, data) {\n    let location;\n    if (program.uniformLocation[name]) {\n      location = program.uniformLocation[name];\n    } else {\n      location = this.gl.getUniformLocation(program, name);\n      program[name] = location;\n    }\n    if (location < 0) {\n      console.log(`Failed to get the storage location of ${name}`);\n      return false;\n    }\n    let dataArray = new Float32Array(data);\n    this.gl.useProgram(program);\n    this.gl.uniform2fv.call(this.gl, location, dataArray);\n  }\n  setUniform1i(program, name, data){\n    let location;\n    if (program.uniformLocation[name]) {\n      location = program.uniformLocation[name];\n    } else {\n      location = this.gl.getUniformLocation(program, name);\n      program[name] = location;\n    }\n    if (location < 0) {\n      console.log(`Failed to get the storage location of ${name}`);\n      return false;\n    }\n    this.gl.useProgram(program);\n    this.gl.uniform1i.call(this.gl, location, data);\n  };\n  setUniform1f(program, name, data) {\n    let location;\n    if (program.uniformLocation[name]) {\n      location = program.uniformLocation[name];\n    } else {\n      location = this.gl.getUniformLocation(program, name);\n      program[name] = location;\n    }\n    if (location < 0) {\n      console.log(`Failed to get the storage location of ${name}`);\n      return false;\n    }\n    this.gl.useProgram(program);\n    this.gl.uniform1f.call(this.gl, location, data);\n  };\n  setAttribute(program, name, data, num, typeName) {\n    let location;\n    if (program.attributeLocation[name] && program.attributeLocation[name] >= 0) {\n      location = program.attributeLocation[name];\n    } else {\n      location = this.gl.getAttribLocation(program, name);\n      program.attributeLocation[name] = location;\n    }\n    if (location < 0) {\n      console.log(`Failed to get the storage location of ${name}`);\n      return false;\n    }\n    let buffer = this.gl.createBuffer();\n    if (!buffer) {\n      console.log(\"Failed to create the buffer object\");\n      return false;\n    }\n    this.gl.useProgram(program);\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, data, this.gl.STATIC_DRAW);\n    this.gl.vertexAttribPointer(location, num, this.gl[typeName], false, 0, 0);\n    this.gl.enableVertexAttribArray(location);\n\n    return true;\n  }\n  initFramebufferObject() {\n    let _this = this;\n    let gl = _this.gl;\n    let framebuffer, texture, depthBuffer;\n    let OFFSCREEN_WIDTH = MAPSIZE,\n      OFFSCREEN_HEIGHT = MAPSIZE;\n    let error = function () {\n      if (framebuffer) gl.deleteFramebuffer(framebuffer);\n      if (texture) gl.deleteTexture(texture);\n      if (depthBuffer) gl.deleteRenderbuffer(depthBuffer);\n      return null;\n    };\n    framebuffer = gl.createFramebuffer();\n    if (!framebuffer) {\n      console.log(\"Failed to create frame buffer object\");\n      return error();\n    }\n    texture = gl.createTexture(); // Create a texture object\n    if (!texture) {\n      console.log(\"Failed to create texture object\");\n      return error();\n    }\n    gl.bindTexture(gl.TEXTURE_2D, texture); // Bind the object to target\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      OFFSCREEN_WIDTH,\n      OFFSCREEN_HEIGHT,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null\n    );\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    // Create a renderbuffer object and Set its size and parameters\n    depthBuffer = gl.createRenderbuffer(); // Create a renderbuffer object\n    if (!depthBuffer) {\n      console.log(\"Failed to create renderbuffer object\");\n      return error();\n    }\n    gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuffer); // Bind the object to target\n    gl.renderbufferStorage(\n      gl.RENDERBUFFER,\n      gl.DEPTH_COMPONENT16,\n      OFFSCREEN_WIDTH,\n      OFFSCREEN_HEIGHT\n    );\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuffer);\n\n    framebuffer.texture = texture; // Store the texture object\n\n    // Check if FBO is configured correctly\n    var e = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    if (gl.FRAMEBUFFER_COMPLETE !== e) {\n      console.log(\"Frame buffer object is incomplete: \" + e.toString());\n      return error();\n    }\n\n    // Unbind the buffer object\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n    return framebuffer;\n  }\n  drawMap(time){\n    let _this = this;\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this.fbo);\n    this.gl.viewport(0, 0, MAPSIZE, MAPSIZE);\n    this.gl.useProgram(this.mapProgram);\n    this.setUniform1f(this.mapProgram, \"u_time\", (new Date().getTime() - this.timestamp + time) / 1000);\n    this.setAttribute(this.mapProgram, \"a_Position\", new Float32Array([\n      -1.0,\n      -1.0,\n\n      1.0,\n      -1.0,\n\n      -1.0,\n      1.0,\n\n      -1.0,\n      1.0,\n\n      1.0,\n      -1.0,\n\n      1.0,\n      1.0\n    ]), 2, \"FLOAT\");\n    this.setUniform2v(this.mapProgram, \"u_resolution\", [\n      MAPSIZE,\n      MAPSIZE\n    ]);\n    this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n    this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n  }\n  drawScene() {\n    let _this = this;\n    this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null);\n    this.gl.viewport(0, 0, _this.canvas.width, _this.canvas.height);\n    this.gl.useProgram(this.program);\n    this.setUniform1f(this.program, \"u_time\", (new Date().getTime() - this.timestamp) / 1000);\n    this.setAttribute(this.program, \"a_Position\", new Float32Array([\n        -1.0,\n        -1.0,\n\n        1.0,\n        -1.0,\n\n        -1.0,\n        1.0,\n\n        -1.0,\n        1.0,\n\n        1.0,\n        -1.0,\n\n        1.0,\n        1.0\n      ]), 2, \"FLOAT\");\n    this.setUniform2v(this.program, \"u_resolution\", [\n      this.canvas.width,\n      this.canvas.height\n    ]);\n    this.setUniform1f(this.program, \"u_map\", 0);\n    this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n  }\n  update(time) {\n    this.drawMap(time);\n    this.drawScene();\n  }\n}\n\nexport {\n  GLRenderer as default\n};","import Stats from 'stats-js';\nimport { getResizeEl } from \"./helper\";\nimport GLRenderer from './gl_renderer';\nimport vShader from \"../plugin/v_shader.glsl\";\nimport fShader from \"../plugin/f_shader.glsl\";\nimport mapVShader from \"../plugin/map_v_shader.glsl\";\nimport mapFShader from \"../plugin/map_f_shader.glsl\";\n\nlet stats = new Stats();\nstats.setMode(0);\nstats.domElement.style.position = 'absolute';\nstats.domElement.style.left = '0px';\nstats.domElement.style.top = '0px';\ndocument.body.appendChild(stats.domElement);\n\nlet canvas = getResizeEl(document.getElementById(\"webgl\"));\n\nlet glRenderer;\n\nlet timeInfo = {\n  time: 0\n};\n\nglRenderer = new GLRenderer(canvas, vShader, fShader, mapVShader, mapFShader);\n\nanimate();\n\nfunction animate(){\n  stats && stats.begin();\n  glRenderer && glRenderer.update(timeInfo.time);\n  stats && stats.end();\n  requestAnimationFrame(animate);\n}"],"sourceRoot":""}